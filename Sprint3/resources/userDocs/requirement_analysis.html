
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <title>Sprint3</title>
        <link rel="stylesheet" type="text/css" href="../../../commons/resources/styles/templateISS.css">
        <link rel="stylesheet" type="text/css" href="../../../commons/resources/styles/main.css">
        <link rel="stylesheet" type="text/css" href="../../../commons/resources/styles/navbar.css">
        <link rel="stylesheet" type="text/css" href="../../../commons/resources/styles/table.css">
        <link rel="stylesheet" type="text/css" href="../../../commons/resources/styles/code.css">
        <script type="text/javascript" src="../../../commons/resources/scripts/myScripts.js"></script>
    </head>

    <body onload="loadNav(); setupSort(); setupCode();">
        <div id="openButton" class="openButton" onclick="openNav(true)">&#9776; Menu</div>
        <div id="sidenav" class="sidenav">
            <a class="closeButton" href="javascript:void(0)" onclick="closeNav(true)">&times;</a>
            <a class="sprint" href="../../../Sprint0/index.html">Sprint0</a>
            <a class="sprint" href="../../../Sprint1/index.html">Sprint1</a>
            <a class="sprint" href="../../../Sprint2/index.html">Sprint2</a>
            <a id="currentSprint" class="sprint" href="#">&#8211;&#8212; Sprint3 &#8212;&#8211;</a>
            <a href="../../index.html">Index</a>
            <a href="final_theme.html">Final Theme</a>
            <a class="selected" href="requirement_analysis.html">Requirement<br/>Analysis</a>
            <div class="sidenavSection">
                <a href="#General-Overview">General Overview</a>
                <div class="sidenavSubSection">
                    <a href="#System-Abstract">System Abstract</a>
                </div>
                <a href="#Requirements-Formalization">Requirements<br/>Formalization</a>
                <div class="sidenavSubSection">
                    <a href="#Entities">Entities</a>
                    <a href="#Data">Data</a>
                    <a href="#Messages">Messages</a>
                </div>
                <a href="#System-Components">System<br/>Components</a>
                <div class="sidenavSubSection">
                    <a href="#Raspberry-Pi">Raspberry Pi</a>
                    <a href="#Waste-Service">Waste Service</a>
                    <a href="#DDR-Robot">DDR Robot</a>
                </div>
            </div>
            <a href="problem_analysis.html">Problem Analysis</a>
            <a href="project.html">Project</a>
            <a href="test_plans.html">Test Plans</a>
            <a href="conclusions.html">Conclusions</a>
            <a href="team.html">Team</a>
            <p class="separator">&mdash;&mdash;&mdash;&ndash;&ndash;&mdash;&mdash;&mdash;</p>
            <bottom-spacer/>
        </div>

        <div id="main">
            <h1 align="center">Requirement Analysis</h1>
            The purpose of the final product is to <b>manage a waste-disposal service</b>.

            <h2 id="General-Overview">General Overview</h2>

            <h3 id="System-Abstract">System Abstract</h3>
            The Sprint2 analyzes the components related directly or indirectly to 
            the raspberry. Therefore we are interested in the following computational nodes:
            <ul>
                <li><b>Raspberry Pi</b></li>
                <li><b>WasteService</b></li>
                <li><b>DDR robot</b></li>
            </ul>
            <h4 id="Computational-Nodes">Related Computational Nodes</h4>
            <div class="image-container">
                <img id="map" class="base-image" width="100%" src="../../resources/diagrams/sprint2_system_overview.png"/>
                <img id="map-legend" class="overlay-image2" width="100%" src="../../resources/diagrams/legend.png"/>
            </div>
            <input type="checkbox" onclick="showOverlay(this, 'map-legend');" checked>Show the legend</input><br/>

            
            <h2 id="Requirements-Formalization">Requirements Formalization</h2>
            <h3 id="Entities">Entities</h3>
            <table class="dictionary">
                <tr>
                    <th>Entity</th>
                    <th>Activity</th>
                    <th>Type</th>
                    <th>Description/Behaviour</th>
                </tr>
                <tr>
                    <td>alarmDevice (sonar)</td>
                    <td>Proactive</td>
                    <td>-</td>
                    <td>
                        Entity, which is part of a smart device, that sends a message to the
                        wasteService when it detects the presence of an obstacle.
                        We formalize the alarmDevice as an actor because it has its own autonomous
                        flow of control, and sends messages to wasteService.
                    </td>
                </tr>
                <tr>
                    <td>warningDevice (led)</td>
                    <td>Reactive</td>
                    <td>-</td>
                    <td>
                        Entity, which is part of a smart device, used to monitor the state of the trolley,
                        We model it as an actor beacuse it processes messages one by one and
                        updates the Led state accordingly.
                    </td>
                </tr>
                <tr>
                    <td>wasteService</td>
                    <td>Proactive&nbsp& Reactive</td>
                    <td>Actor</td>
                    <td>
                        Handles the store requests and manages the transport trolley with high-level abstraction actions.
                        It contains an internal representation of the waste service area.
                    </td>
                </tr>
                <tr>
                    <td>transportTrolley</td>
                    <td>Proactive&nbsp& Reactive</td>
                    <td>Actor</td>
                    <td>
                        Handles the wasteService requests and sends lower-level commands to the basicRobot.
                    </td>
                </tr>
                <tr>
                    <td><emn>basicRobot</emn></td>
                    <td>Reactive</td>
                    <td>Actor</td>
                    <td>Entity that receives commands from the transportTrolley and drives the DDR robot.</td>
                </tr>
            </table>

            <h3 id="Data">Data</h3>
            <table class="dictionary">
                <tr>
                    <th>Data</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>LedState</td>
                    <td>Enumerative</td>
                    <td>
                        All the <b>possible states</b> of the Led.
                        <pre>
                            enum class LedState { OFF, ON, BLINKING }
                        </pre>
                    </td>
                </tr>
            </table>

            <h3 id="Messages">Messages</h3>
            <table class="dictionary">
                <tr>
                    <th>Message</th>
                    <th>Type</th>
                    <th>Sender</th>
                    <th>Receiver</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>distance</td>
                    <td>Dispatch</td>
                    <td>Alarm Device</td>
                    <td>WasteService</td>
                    <td>
                        Tell the distance of eventually detected obstacles.
                    </td>
                </tr>
                <tr>
                    <td>stop</td>
                    <td>Dispatch</td>
                    <td>WasteService</td>
                    <td>Transport Trolley</td>
                    <td>
                        Stop the robot and prevent it from doing any activity.
                    </td>
                </tr>
                <tr>
                    <td>resume</td>
                    <td>Dispatch</td>
                    <td>WasteService</td>
                    <td>Transport Trolley</td>
                    <td>
                        Resume the robot activity.
                    </td>
                </tr>
                <tr>
                    <td>updateLed</td>
                    <td>Dispatch</td>
                    <td>Transport Trolley</td>
                    <td>Warning Device</td>
                    <td>
                        Update the Led state.
                    </td>
                </tr>
            </table>

            <h2 id="Raspberry-Pi">Raspberry Pi</h2>
            <ksi>Raspberry Pi</ksi> is a single-board computer developed by the Raspberry Pi Foundation
            in association with Broadcom. It has a CPU/GPU, a RAM, a series of pin for Input and Output, and
            a USB hub.
            <br/>
            <br/>
            <img width="240px" src="../imgs/raspberrypi4.png"/>
            <img width="360px" src="../imgs/raspberrypi4_pins.png"/>
            <br/>
            <br/>
            We're going to use a Raspberry Pi 4 Model B, since we already have one.
            Moreover, it's going to constitute a <i>separate node</i> from the WasteService one,
            and will have two main components attached: a Led and a Sonar.

            <h4 id="Sonar">Sonar</h4>
            The <ksi>Sonar</ksi> (<ksi>HC-SR04</ksi>) is an input component which measures the distance in a straight line,
            from the surrounding environment, and sends those data.
            <br/><br/>
            <img width="340px" src="../imgs/HC-SR04.png"/>
            <img width="260px" src="../imgs/Sonar-example.png"/>
            <br/>
            <br/>
            
            The sonar has 4 pins:
            <ul>
                <li><kc>Vcc</kc>, supplies power to the HC-SR04 ultrasonic sensor (it operates at 5V DC);</li>
                <li><kc>Trig (Trigger)</kc>, used to trigger ultrasonic sound pulses. By setting this pin to HIGH for 10µs, the sensor initiates an ultrasonic burst;</li>
                <li><kc>Echo</kc>, goes high when the ultrasonic burst is transmitted and remains high until the sensor receives an echo, after which it goes low.</li>
                <li><kc>GND</kc>, the ground pin.</li>
            </ul>
            It's possible to calculate the distance from the detected object and the sonar, by measuring
            the time the <kc>Echo</kc> pin stays high.
            
            <br/>
            <br/>
            <img width="400px" src="../imgs/HC-SR04_example.gif"/>
            
            <h4 id="Led">Led</h4>
            The <ksi>Led</ksi> is an output component which has 2 pins: one for the power supply and
            one for the ground. Its brightness can be adjusted according to the amount of voltage it's 
            supplied with, but since the RaspberryPi doesn't have any analogic outputs, we must consider it having
            two states: ON and OFF.
            <br/>
            <br/>
            <img width="150px" src="../imgs/led_off.png"/>
            <img width="150px" src="../imgs/led_on.png"/>
            <br/>
            <br/>

            However, by turning it ON and OFF in a rapid sequence, we can make it BLINK,
            and obtain a sort of "third state".
            Therefore, for the purpose of the project, we will have to update its state
            in real-time, according to the sonar data. Those data refers to the Transport
            Trolley current state:
            <ul>
                <li>Transport Trolley is at HOME, then the Led must be off;</li>
                <li>Transport Trolley is moving, then the Led must be blinking;</li>
                <li>Transport Trolley is stopped, then the Led must be on.</li>
            </ul>

            <h4 id="Others">Others</h4>
            The minimal configuration is the following:
            <br/>
            <br/>
            <img width="400px" src="../imgs/circuit_with_breadboard.png"/>
            <br/>
            <br/>
            Since we don't expect to solder components directly to the board,
            we are going to need the following:
            <ul>
                <li>
                    a <b>breadboard</b>, which will will ease the creation and testing of
                    different circuits;
                </li>
                <li><b>wires</b>, needed to attach components to the Raspberry Pi.</li>
                <li>
                    <b>resistors</b> (not esplicitly needed for the Raspberry Pi, but may
                    be safer) to limit the amount of current flowing through the circuit. 
                </li>
            </ul>
            
        </div>
    </body>
</html>
