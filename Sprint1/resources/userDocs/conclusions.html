<!DOCTYPE html>
<html>
    <head>
        <title>Sprint1</title>
        <link rel="stylesheet" type="text/css" href="../../../commons/resources/styles/templateISS.css">
        <link rel="stylesheet" type="text/css" href="../../../commons/resources/styles/main.css">
        <link rel="stylesheet" type="text/css" href="../../../commons/resources/styles/navbar.css">
        <link rel="stylesheet" type="text/css" href="../../../commons/resources/styles/table.css">
        <link rel="stylesheet" type="text/css" href="../../../commons/resources/styles/code.css">
        <script type="text/javascript" src="../../../commons/resources/scripts/myScripts.js"></script>
    </head>

    <body onload="loadNav();"> <!--setLastModifiedDate();">-->
        <div id="openButton" class="openButton" onclick="openNav(true)">&#9776; Menu</div>
        <div id="sidenav" class="sidenav">
            <a class="closeButton" href="javascript:void(0)" onclick="closeNav(true)">&times;</a>
            <a class="sprint" href="../../../Sprint0/index.html">Sprint0</a>
            <a id="currentSprint" class="sprint" href="#">&#8211;&#8212; Sprint1 &#8212;&#8211;</a>
            <a href="../../index.html">Index</a>
            <a href="final_theme.html">Final Theme</a>
            <a href="requirement_analysis.html">Requirement<br/>Analysis</a>
            <a href="problem_analysis.html">Problem Analysis</a>
            <a href="project.html">Project</a>
            <a href="test_plans.html">Test Plans</a>
            <a class="selected" href="conclusions.html">Conclusions</a>
            <div class="sidenavSection">
                <a href="#Summary">Summary</a>
                <div class="sidenavSubSection">
                    <a href="#Task-Partitioning">Task Partitioning</a>
                    <a href="#Demo-Example">Demo Example</a>
                </div>
                <a href="#Sprint-Review">Sprint Review</a>
                <div class="sidenavSubSection">
                    <a href="#Bugs">Bugs</a>
                </div>
                <a href="#Sprint-Retrospective">Sprint Retrospective</a>
                <a href="#Work-Plan">Work Plan</a>
                <div class="sidenavSection">
                    <a href="#Sprint2">Sprint2</a>
                    <a href="#Sprint3">Sprint3</a>
                </div>
            </div>
            <a href="team.html">Team</a>
            <p class="separator">&mdash;&mdash;&mdash;&ndash;&ndash;&mdash;&mdash;&mdash;</p>
            <a class="sprint" href="../../../Sprint2/index.html">Sprint2</a>
            <a class="sprint" href="../../../Sprint3/index.html">Sprint3</a>
            <bottom-spacer/>
        </div>

        <div id="main">
            <h1 align="center">Sprint Conclusions</h1>

            <h2 id="Summary">Summary</h2>
            During <b>Sprint 1</b> our team analyzed and implemented the software related to the Core-business
            of the system, trying to meet in the best way possible the customer requirements. We had been able to develop and test different softwares, to ease tasks like the map configuration,
            and to improve the system by making it <i>scalable</i> and <i>flexible</i>.
            <br/>
            We believe that our solution has many <b>points of strength</b>, which can be summarized as it follows:
            <ul>
                <li>Actor Model</li>
                <li>Double counter for the storage management</li>
                <li>Types provider</li>
                <li>Optimized path</li>
                <li>Map configuration editing</li>
            </ul>

            We tested the WasteService on different architectures (Windows, MacOS, Linux) by connecting the SmartDevice
            from different nodes (Android emulator, Android real device) both locally within the LAN and remotely through
            <a href="https://en.wikipedia.org/wiki/Port_forwarding">port forwarding</a>.
            <div class="remark">
                The implemented softwares are the following:
                <ol class="summary">
                    <li><ksi>SmartDevice Simulator</ksi></li>
                    <li>Echo Waste Server</li>
                    <li>Map Editor BCR</li>
                    <li><ksi>WasteService</ksi></li>
                </ol>
            </div>

            <h3 id="Task-Partitioning">Task Partitioning</h3>
            <table class="dictionary">
                <tr>
                    <th>Task</th>
                    <th>Description</th><!-- Summary -->
                    <th>Assignment</th>
                </tr>
                <tr>
                    <td>HTML document</td>
                    <td>
                        Styling and formatting of the HTML document.
                    </td>
                    <td>
                        <ul>
                            <li>Michele Righi</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Project documents</td>
                    <td>
                        HTML content and resources (models, diagrams, images, ...).
                    </td>
                    <td>
                        <ul>
                            <li>Raffaele Battipaglia</li>
                            <li>Karina Chichifoi</li>
                            <li>Michele Righi</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Problem Analysis</td>
                    <td>
                        Identification of the main topics to be analysed,
                        with the relative possible problems to be solved;
                        <br/>
                        brainstorming on solutions, with the related motivations,
                        and alternatives.
                    </td>
                    <td>
                        <ul>
                            <li>Raffaele Battipaglia</li>
                            <li>Karina Chichifoi</li>
                            <li>Michele Righi</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Problem Analysis: QAK model</td>
                    <td>
                        Creation of a QAK model of the core-business, with just the
                        main states and a draft of their behaviour and interactions.
                    </td>
                    <td>
                        <ul>
                            <li>Raffaele Battipaglia</li>
                            <li>Karina Chichifoi</li>
                            <li>Michele Righi</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Problem Analysis: Test Plan</td>
                    <td>
                        Brainstorming about the functionalities and interactions to
                        test and making of test classes to verify the correctness of
                        the behaviour of the system, according to the first logical architecture,
                        given by the QAK model.
                    </td>
                    <td>
                        <ul>
                            <li>Raffaele Battipaglia</li>
                            <li>Karina Chichifoi</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Project: SmartDevice</td>
                    <td>
                        Creation of the first element of the core-business chain:
                        the (mobile) application used by the truck driver to interact with
                        the Waste Service and deposit the truck load.
                    </td>
                    <td>
                        <ul>
                            <li>Michele Righi</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Project: EchoWasteServer</td>
                    <td>
                        Creation of an application to ease the testing of
                        the SmartDevice, especially on mobile devices.
                    </td>
                    <td>
                        <ul>
                            <li>Michele Righi</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Project: MapEditor</td>
                    <td>
                        Utility application to ease the creation and edit of
                        a configuration file for the room of the service area.
                    </td>
                    <td>
                        <ul>
                            <li>Michele Righi</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Project: WasteService</td>
                    <td>
                        Development of the heart of the core-business: the WasteService software.
                        It includes the creation of the QAK model, starting from the one of the
                        Problem Analysis, the implementation of the plannerBCR Kotlin object to make
                        use of the MapConfig file.
                    </td>
                    <td>
                        <ul>
                            <li>Raffaele Battipaglia</li>
                            <li>Karina Chichifoi</li>
                            <li>Michele Righi</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Test Plans</td>
                    <td>Test Plans related to projects, which include SmartDevice tests and WasteService tests.</td>
                    <td>
                        <ul>
                            <li>Raffaele Battipaglia</li>
                            <li>Karina Chichifoi</li>
                            <li>Michele Righi</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Automated Demo</td>
                    <td>
                        Test of single executable units and creation of a script program
                        that automates the execution of the entire core-business.
                    </td>
                    <td>
                        <ul>
                            <li>Raffaele Battipaglia</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Deployment</td>
                    <td>Packaging and deployment of the softwares and test on different architectures (Linux & MacOS).</td>
                    <td>
                        <ul>
                            <li>Karina Chichifoi</li>
                        </ul>
                    </td>
                </tr>
            </table>

            <h3 id="Demo-Example">Demo Example</h3>
            <h4>Setup</h4>
            <ol>
                <li>Install docker.</li>
                <li>Install gradle (>= 7.4).</li>
                <li>(Optional) install Flutter to run the Smart Device on the Android Emulator.</li>
                <li>Download <a href="https://github.com/iss2022-BCR/WasteService/releases/download/sprint1_v1/virtualRobotOnly4.0.yaml">VirtualRobot</a> docker image.</li>
                <li>Download <a href="https://github.com/iss2022-BCR/WasteService/releases/download/sprint1_v1/sprint1_waste_service.zip">WasteService</a> zip and extract its content.</li>
                <li>
                    Download the SmartDevice:
                    <a href="https://github.com/iss2022-BCR/WasteService/releases/download/sprint1_v1/sprint1_smart_device.apk">APK</a>,
                    <a href="https://github.com/iss2022-BCR/WasteService/releases/download/sprint1_v1/sprint1_smart_device_Windows_x64.zip">Windows version</a>.
                </li>
            </ol>
            <h4>Execution</h4>
            <ol>
                <li>
                    Run the VirtualRobot (on Windows you first need to launch Docker Desktop):
                    <pre>
                        docker-compose -f .\virtualRobotOnly4.0.yaml up
                    </pre>
                    Open a browser (e.g. Chrome) and enter the following URL: "https://localhost:8090"
                    <center><img width="100%" src="../imgs/demo/run_VirtualRobot.png"/></center>
                    <br/>
                </li>
                <li>
                    Run the WasteService by using the script <code>run_WasteService.bat</code> (extracted
                    from sprint1_waste_service zip).
                    <center><img width="100%" src="../imgs/demo/run_WasteService.png"/></center>
                    <br/>
                </li>
                <li>
                    Run the SmartDevice:
                    <ul>
                        <li>(Recommended) Using a real Android device: just install the APK on the device and run it.</li>
                        <li>
                            Using the emulator (to install emulators refer to <a href="https://developer.android.com/studio/run/managing-avds">Create and manage virtual devices</a>):
                            <br/>
                            <pre>
                                :: launch the emulator
                                flutter emulators --launch &lt;emulator_id&gt;
                                
                                :: run the application on the emulator
                                :: (you need to be in the root directory of
                                :: sprint1_smart_device project)
                                flutter run
                            </pre>
                        </li>
                        <li>Using the Windows executable: run <code>sprint1_smart_device.exe</code>.</li>
                    </ul>
                    <center>
                        <img width="100%" src="../imgs/demo/run_SmartDevice.png"/>
                        <br/>
                        <b><i>SmartDevice running on Android Emulator</i>.</b>
                    </center>
                </li>
            </ol>

            <h2 id="Sprint-Review">Sprint Review</h2>
            The interaction with the customer highlighted the following key points:
            <ol>
                <li>
                    Project <code>sprint1_waste_service</code> contains <darkred>different QAK files with
                    the same actors</darkred>, which generate confusion and useless files upon save.
                </li>
                <li>
                    When trying to download and run the code, some <darkred>dependencies
                    were missing</darkred> on the GitHub repository, which were necessary
                    to test the WasteService code.
                </li>
                <li>
                    In the Test Plans section it's not much clear that the <darkred>testing of
                    the business logic of the WasteService main components</darkred> had been already
                    carried out during the Problem Analysis.
                </li>
                <li>
                    The customer was curious about our <darkred>decision to adopt Flutter</darkred> to implement
                    the SmartDevice and asked to give some more details on it.
                </li>
                <li>
                    When showing the <darkred>demo</darkred> to the customer we noticed that the order in
                    which run the scripts and which ones to run, from the setup to the actual execution of the WasteService,
                    was not much clear.
                </li>
            </ol>

            <h3 id="Bugs">Bugs</h3>
            <ol start="6">
                <li>
                    We discovered that the <darkred>windows build for the SmartDevice</darkred> has a bug when receiving the
                    store request replies: it receives a fragmented reply, therefore the ApplMessage doesn't get parsed correctly.
                </li>
                <li>
                    The solution adopted in order to <darkred>send the loadrejected instantly</darkred> to the smart device,
                    actually doesn't work as expected: since the deposit is a request, if the transport trolley
                    is already busy performing another deposit action, the waste service actor cannot reply with
                    loadrejected, until the transport trolley sends back a reply.
                    <!-- A possible solution would be to convert the deposit message to a dispatch, and use a
                    variable local to the waste service actor, to store the busy state of the trolley.
                    + test plan with 2 requests (one with low weight -> load accepted, one with too much weight,
                    to get a loadrejected reply instantly)
                    -->
                </li>
            </ol>

            <h2 id="Sprint-Retrospective">Sprint Retrospective</h2>
            In order to address the problems outlined with the Sprint Review, we provided the following corrections:
            <ol class="fixes">
                <li>
                    <a href="../../Sprint1_Project/sprint1_waste_service/">
                        We <darkgreen>commented the unnecessary QAK files</darkgreen> by changing the format
                        in their filenames from "<code>.qak</code>" to "<code>._</code>".
                    </a>
                </li>
                <li>
                    <a href="https://github.com/iss2022-BCR/WasteService/releases/download/sprint1_v1/sprint1_waste_service.zip">
                        We added the dependencies necessary to run the WasteService directly
                        to the <darkgreen>sprint1_waste_service</darkgreen> zip.
                    </a>
                </li>
                <li>
                    <a href="test_plans.html">
                        We inserted a <darkgreen>note at the beginning of the Test Plans section</darkgreen>,
                        saying that they prosecute from the problem analysis test plans.
                    </a>
                </li>
                <li>
                    <a href="problem_analysis.html#Smart-Device-Technology">
                        We added the <darkgreen>analysis of the related problem</darkgreen>, with motivations and
                        alternatives.
                    </a>
                </li>
                <li>
                    <a href="#Demo-Example">
                        We introduced a <darkgreen>demo example section</darkgreen>, explaining how the scripts should
                        be executed.
                    </a>
                </li>
            </ol>
            <!--
            <h3 id="Extras">Extras</h3>
            <ol>
                <li>
                    <a href=""><ksi>Fix #5_Sprint1</ksi></a>,
                    add a new section "extras" under the sprints, which contains
                    an index with all the commons documents.
                </li>
            </ol>
            
            TO-DO:
            <ol>
                <li>Upgrade QAK libraries to latest version.</li>
                <li>Create script to update local docker image.</li>
                <li>Deploy WasteService as a JAR.</li>
                <li>Flutter SmartDevice build the Linux app.</li>
            </ol>
            -->

            <h2 id="Work-Plan">Work Plan</h2>
            The next sprint is <a href="../../../Sprint2/index.html">Sprint2</a>, which involves the requirement <b>4</b>.

            <h3 id="Sprint2"><b>Sprint2</b> - RaspberryPi</h3>
            The Sprint2 will involve the use of the RaspberryPi:
            <ul>
                <li>Implement the <i>warning device</i> (Led component).</li>
                <li>Implement the <i>alarm device</i> (Sonar component).</li>
                <li>Implement the stop/resume feature for the transport trolley.</li>
                <li>
                    Make the robot stop and move to Indoor if a new store request is received while it's
                    returning to Home.
                </li>
            </ul>
            <h3 id="Sprint3"><b>Sprint3</b> - Monitoring</h3>

        </div>

        <!--<footer>
            Last modified: <span id="lastModifiedDate"></span>
        <footer>-->
    </body>

</html>
