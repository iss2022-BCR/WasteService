<!DOCTYPE html>
<!-- saved from url=(0137)file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#basicrobot22 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/">

    <title>BasicRobot22 — iss22 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="./BasicRobot22_files/pygments.css">
    <link rel="stylesheet" type="text/css" href="./BasicRobot22_files/alabaster.css">
    <script data-url_root="./" id="documentation_options" src="./BasicRobot22_files/documentation_options.js.download"></script>
    <script src="./BasicRobot22_files/jquery.js.download"></script>
    <script src="./BasicRobot22_files/underscore.js.download"></script>
    <script src="./BasicRobot22_files/doctools.js.download"></script>
    <link rel="index" title="Index" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/genindex.html">
    <link rel="search" title="Search" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/search.html">
    <link rel="next" title="Applicazioni 2022" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/Applicazioni22.html">
    <link rel="prev" title="QActor (meta)model" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/QakIntro.html">
   
  <link rel="stylesheet" href="./BasicRobot22_files/custom.css" type="text/css">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="basicrobot22">
<h1>BasicRobot22<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#basicrobot22" title="Permalink to this headline">¶</a></h1>
<p>Obiettivo: introdurre un componente software che esegue comandi di spostamento di un DDR-robot
in ‘modo indipendente dalla tecnologia’ con cui è realizzato del robot (virtuale o reale).</p>
<section id="basicrobot22-requisiti">
<h2>BasicRobot22: requisiti<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#basicrobot22-requisiti" title="Permalink to this headline">¶</a></h2>
<p>Più specificatamente, <code class="docutils literal notranslate"><span class="pre">BasicRobot22</span></code>:</p>
<ul>
<li><p>(requisito <span class="blue">cmdbase</span>) è in grado di eseguire comandi-base  <strong>cmd</strong> di spostamento,
con argomento <span class="blue">MOVE = w | s | l | r | h</span> (linguaggio <a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/RobotCleaner.html#linguaggio-di-comando-da-cril-a-aril"><span class="std std-ref">aril</span></a>)</p></li>
<li><p>(requisito <span class="blue">cmdstep</span>) è in grado di rispondere alla richiesta di effettuare uno <strong>step</strong> in avanti per il tempo <span class="blue">TIME</span> specificato
nell’argomento, fornendo una risposta che può essere:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>stepdone</strong> se lo <em>step</em> è stato eseguito con successo</p></li>
<li><p><strong>stepfail</strong> se lo <em>step</em> è fallito dopo il tempo <span class="blue">DT</span> (<code class="docutils literal notranslate"><span class="pre">DT&lt;TIME</span></code>) per una qualche ragione <span class="blue">REASON</span>.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>(requisito <span class="blue">backstep</span>)  In questo caso, <code class="docutils literal notranslate"><span class="pre">BasicRobot22</span></code> effettua uno spostamento all’indietro
<strong>‘di riposizionamenmto’</strong> con durata (approssimativa)  <span class="blue">DT</span>.</p></li>
<li><p>(requisito <span class="blue">situated</span>) è in grado di percepire e gestire informazioni provenienti dall’ambiente</p></li>
<li><p>(requisito <span class="blue">observable</span>) è in grado di rendere ossevabili informazioni
sul suo stato funzionale corrente</p></li>
<li><p>(requisito <span class="blue">tipidirobot</span>) è in grado di utilizzare diversi tipi di robot (virtuali e reali) costruiti
ciascuno con una propria  tecnologia</p></li>
<li><p>(requisito <span class="blue">cmdconsole</span>) deve poter essere comandato da un utente umano attraverso una console di comando</p></li>
</ul>
<section id="basicrobot22-analisi-dei-requisiti">
<h3>BasicRobot22: analisi dei requisiti<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#basicrobot22-analisi-dei-requisiti" title="Permalink to this headline">¶</a></h3>
<p>Dopo il colloquio con il committente, si può precisare che:</p>
<section id="requisito-cmdconsole">
<h4>requisito <em>cmdconsole</em><a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#requisito-cmdconsole" title="Permalink to this headline">¶</a></h4>
<p>Il committente si aspetta una console   come quella di figura</p>
<a class="reference internal image-reference" href="./BasicRobot22_files/consoleTcpSmall.PNG"><img alt="_images/consoleTcpSmall.PNG" class="align-center" src="./BasicRobot22_files/consoleTcpSmall.PNG" style="width: 20%;"></a>
</section>
<section id="requisito-cmdstep">
<h4>requisito  <em>cmdstep</em><a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#requisito-cmdstep" title="Permalink to this headline">¶</a></h4>
<p>il simbolo <strong>p</strong> sulla console corrisponde al comando <code class="docutils literal notranslate"><span class="pre">step</span></code></p>
</section>
<section id="requisito-backstep">
<h4>requisito  <em>backstep</em><a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#requisito-backstep" title="Permalink to this headline">¶</a></h4>
<p>il <em>riposizionamenmto</em>  del robot dopo uno <em>stepfail</em> ha come obiettivo la possibilità che il robot possa
costruire una mappa congruente dell’ambiente in cui si muove, come quella introdotta in
<a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/RobotCleaner.html#il-robot-come-unita-di-misura"><span class="std std-ref">Il robot come unità di misura</span></a></p>
</section>
<section id="requisito-tipidirobot">
<h4>requisito  <em>tipidirobot</em><a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#requisito-tipidirobot" title="Permalink to this headline">¶</a></h4>
<p>Il committente fa riferimento ad almeno tre diversi tipi di robot:</p>
<ul class="simple">
<li><p><a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/VirtualRobot.html#virtualrobot"><span class="std std-ref">VirtualRobot</span></a></p></li>
<li><p><a class="reference external" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.qak21.basicrobot/userDocs/Mbot2020.html">Mbot</a> (realmbot)</p></li>
<li><p><a class="reference external" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/unibo.basicrobot22/userDocs/LabNanoRobot.html">NanoRobot</a> (realnano)</p></li>
</ul>
<a class="reference internal image-reference" href="./BasicRobot22_files/basicrobotComponent.PNG"><img alt="_images/basicrobotComponent.PNG" class="align-center" src="./BasicRobot22_files/basicrobotComponent.PNG" style="width: 60%;"></a>
</section>
<section id="requisito-situated">
<h4>requisito  <em>situated</em><a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#requisito-situated" title="Permalink to this headline">¶</a></h4>
<p>Le informazioni provenienti dall’ambiente in cui il <code class="docutils literal notranslate"><span class="pre">BasicRobot22</span></code> è situato possono essere di varia natura,
<strong>al momento non del tutto precisata</strong>. Il caso ritenuto più probabile è che il robot debba poter reagire
ad <span class="blue">allarmi</span> generati da <em>sensori on board</em> (ad esempio sensori impatto, sonar, etc)
o <em>sensori ambientali</em> quali termometri, barometri, etc.</p>
</section>
<section id="requisito-observable">
<h4>requisito  <em>observable</em><a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#requisito-observable" title="Permalink to this headline">¶</a></h4>
<p>Le informazioni osservabili <strong>non sono al momento del tutto precisate</strong>.  Tra le più probabili vi sono:</p>
<ul class="simple">
<li><p>lo stato di esecuzione del robot, cioè l’azione che sta compiendo</p></li>
<li><p>il fatto che il robot, nel muoversi, ha incontrato un ostacolo</p></li>
</ul>
</section>
</section>
</section>
<section id="basicrobot22-analisi-del-problema">
<h2>BasicRobot22: analisi del problema<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#basicrobot22-analisi-del-problema" title="Permalink to this headline">¶</a></h2>
<p><span class="remark">core problem</span></p>
<ul class="simple">
<li><p>Il cuore del problema consiste nel fare in modo che <code class="docutils literal notranslate"><span class="pre">BasicRobot22</span></code> agisca come un <em>esecutore osservabile</em>
di comandi, essendo al contempo capace di reagire ad  <em>allarmi</em>.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">BasicRobot22</span></code> si comporta essenzialmente in modo reattivo, in quanto opera sotto il controllo dell’utente,
ma mostra proattività nella esecuzione dei comandi, tra cui in particolare <code class="docutils literal notranslate"><span class="pre">step</span></code>.</p>
<p>Nel seguito si farà uso del <a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/QakIntro.html#qactor-meta-model"><span class="std std-ref">linguaggio  QAk</span></a> per esprimere in modo formale
l’architettura logica del sistema e per costruire un modello eseguibile (prototipo)
con cui interagire con il committente, al fine di definire al meglio i requisiti.</p>
<p><span class="remark">progetto di lavoro: unibo.basicrobot22</span></p>
<p>Il modello viene costruito nel file <a class="reference external" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/unibo.basicrobot22/src/basicrobot.qak">basicrobotqak</a>, nel   orogetto  <em>unibo.basicrobot22</em>.</p>
<section id="basicrobot22-interazione">
<h3>BasicRobot22: interazione<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#basicrobot22-interazione" title="Permalink to this headline">¶</a></h3>
<p>L’interazione con il robot è definita, in termini di operazioni di message-passing, come segue</p>
<section id="il-requisito-cmdbase">
<h4>Il requisito <em>cmdbase</em><a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#il-requisito-cmdbase" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Dispatch</span>  <span class="n">cmd</span> <span class="p">:</span> <span class="n">cmd</span><span class="p">(</span><span class="n">MOVE</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="remark">Sulla durata dei comandi-base</span></p>
<ul class="simple">
<li><p>Per muovere un robot reale occorre inviare comendi ai motori. La esecuzione di uno step di durata <code class="docutils literal notranslate"><span class="pre">DT</span></code>
implica l’invio di due comandi (<span class="blue">w</span> e <span class="blue">h</span>), intervallati da <code class="docutils literal notranslate"><span class="pre">DT</span></code>.</p></li>
<li><p>Per muovere un <a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/VirtualRobot.html#virtualrobot"><span class="std std-ref">VirtualRobot</span></a> si inviano comandi che specificano già la durata del movimento.
Al fine di usare il <a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/VirtualRobot.html#virtualrobot"><span class="std std-ref">VirtualRobot</span></a> in modo del tutto analogo a un robot reale, si definisce una durata
adeguatamente ‘lunga’ del comando <span class="blue">w</span> (ad esempio <code class="docutils literal notranslate"><span class="pre">1000</span></code> msec)</p></li>
</ul>
</section>
<section id="il-requisito-cmdstep">
<h4>Il  requisito <em>cmdstep</em><a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#il-requisito-cmdstep" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Request</span>   <span class="n">step</span> <span class="p">(</span> <span class="n">TIME</span> <span class="p">)</span>
<span class="n">Reply</span>     <span class="n">stepdone</span> <span class="p">:</span> <span class="n">stepdone</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>
<span class="n">Reply</span>     <span class="n">stepfail</span> <span class="p">:</span> <span class="n">stepfail</span><span class="p">(</span><span class="n">DT</span><span class="p">,</span> <span class="n">REASON</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="il-requisito-situated">
<h3>Il requisito <em>situated</em><a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#il-requisito-situated" title="Permalink to this headline">¶</a></h3>
<p>Al momento supponiamo che <code class="docutils literal notranslate"><span class="pre">BasicRobot22</span></code> debba poter percepire e gestire informazioni provenienti da un sonar
installato a bordo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Event</span>  <span class="n">sonar</span>  <span class="p">:</span> <span class="n">sonar</span><span class="p">(</span><span class="n">DISTANCE</span><span class="p">,</span><span class="n">NAME</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="impostazione-del-modello">
<h3>Impostazione del modello<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#impostazione-del-modello" title="Permalink to this headline">¶</a></h3>
<p>Si delinea una prima definizione formale del sistema nel file <a class="reference external" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/unibo.basicrobot22/src/basicrobot.qak">basicrobotqak</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">System</span> <span class="n">basicrobot</span>

<span class="n">Dispatch</span> <span class="n">cmd</span>       <span class="p">:</span> <span class="n">cmd</span><span class="p">(</span><span class="n">MOVE</span><span class="p">)</span>
<span class="n">Request</span> <span class="n">step</span>       <span class="p">:</span> <span class="n">step</span><span class="p">(</span> <span class="n">TIME</span> <span class="p">)</span>
<span class="n">Reply</span>   <span class="n">stepdone</span>   <span class="p">:</span> <span class="n">stepdone</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>
<span class="n">Reply</span>   <span class="n">stepfail</span>   <span class="p">:</span> <span class="n">stepfail</span><span class="p">(</span><span class="n">DURATION</span><span class="p">,</span> <span class="n">CAUSE</span><span class="p">)</span>

<span class="n">Event</span>  <span class="n">sonar</span>         <span class="p">:</span> <span class="n">sonar</span><span class="p">(</span><span class="n">DISTANCE</span><span class="p">,</span><span class="n">NAME</span><span class="p">)</span>

<span class="n">Context</span> <span class="n">ctxbasicrobot</span> <span class="n">ip</span> <span class="p">[</span><span class="n">host</span><span class="o">=</span><span class="s2">"localhost"</span> <span class="n">port</span><span class="o">=</span><span class="mi">8020</span><span class="p">]</span>

<span class="n">QActor</span> <span class="n">basicrobot</span> <span class="n">context</span> <span class="n">ctxbasicrobot</span><span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="il-requisito-tipidirobot">
<h3>Il requisito  <em>tipidirobot</em><a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#il-requisito-tipidirobot" title="Permalink to this headline">¶</a></h3>
<p>L’uso di robot di tipo diverso  può essere raggiunto introducendo un insieme di diversi supporti di basso livello
e una fase di configurazione
che seleziona il supporto appropriato per il tipo di robot specificato in un file di configurazione del robot.</p>
</section>
<section id="una-prima-architettura">
<h3>Una prima architettura<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#una-prima-architettura" title="Permalink to this headline">¶</a></h3>
<p>Si delinea una architettura come quella raffiguata:</p>
<a class="reference internal image-reference" href="./BasicRobot22_files/basicrobotproject.PNG"><img alt="_images/basicrobotproject.PNG" class="align-center" src="./BasicRobot22_files/basicrobotproject.PNG" style="width: 50%;"></a>
<section id="il-requisito-cmdconsole">
<h4>Il requisito <em>cmdconsole</em><a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#il-requisito-cmdconsole" title="Permalink to this headline">¶</a></h4>
<p>La console che permette la interazione tra un operatore umano e il <code class="docutils literal notranslate"><span class="pre">BasicRobot22</span></code> è un sistema a sè stante che
potrebbe interagire con il robot con uno dei seguenti protocolli:</p>
<ul class="simple">
<li><p>TCP</p></li>
<li><p>HTTP</p></li>
<li><p>CoAP</p></li>
<li><p>MQTT</p></li>
</ul>
<p>Osserviamo che la <a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/QakIntro.html#the-qactor-software-factory"><span class="std std-ref">Qak infrastructure</span></a> supporta già interazioni
via TCP, CoAP, MQTT.</p>
</section>
</section>
<section id="modello-dell-analisi">
<h3>Modello dell’analisi<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#modello-dell-analisi" title="Permalink to this headline">¶</a></h3>
<p><span class="worktodo">WORKTODO: costruire un modello eseguibile del sistema</span></p>
<ul class="simple">
<li><p>Per meglio interagire con il committente è opportuno definire un modello eseguibile del sistema
che imposti le interazioni-base tra console e <code class="docutils literal notranslate"><span class="pre">BasicRobot22</span></code> senza introdurre alcun robot virtuale o reale.</p></li>
</ul>
<section id="modello-sviluppato-in-lab2">
<h4>Modello sviluppato in Lab2<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#modello-sviluppato-in-lab2" title="Permalink to this headline">¶</a></h4>
<p>Tenendo conto della <a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#impostazione-del-modello"><span class="std std-ref">Impostazione del modello</span></a> possiamo dire che:</p>
<ul class="simple">
<li><p>il modello dell’architettura logica include due componenti:
un attore  <code class="docutils literal notranslate"><span class="pre">basicrobot</span></code>  che rappresenta il <code class="docutils literal notranslate"><span class="pre">BasicRobot22</span></code> e un attore <code class="docutils literal notranslate"><span class="pre">mockconsole</span></code> che simula la console.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">System</span> <span class="n">basicrobotanalisi</span>

<span class="n">Dispatch</span> <span class="n">cmd</span>    <span class="p">:</span> <span class="n">cmd</span><span class="p">(</span> <span class="n">MOVE</span> <span class="p">)</span>
<span class="n">Request</span>  <span class="n">step</span>         <span class="p">:</span> <span class="n">step</span><span class="p">(</span> <span class="n">TIME</span> <span class="p">)</span>
<span class="n">Reply</span>  <span class="n">stepdone</span> <span class="p">:</span> <span class="n">stepdone</span><span class="p">(</span> <span class="n">V</span> <span class="p">)</span>
<span class="n">Reply</span>  <span class="n">stepfail</span> <span class="p">:</span> <span class="n">stepfail</span><span class="p">(</span> <span class="n">DT</span><span class="p">,</span> <span class="n">REASON</span> <span class="p">)</span>
<span class="n">Event</span>          <span class="n">sonar</span>  <span class="p">:</span> <span class="n">sonar</span><span class="p">(</span> <span class="n">DISTANCE</span><span class="p">,</span> <span class="n">NAME</span> <span class="p">)</span>

<span class="n">Context</span> <span class="n">ctxbasicrobot</span> <span class="n">ip</span> <span class="p">[</span><span class="n">host</span><span class="o">=</span><span class="s1">'localhost'</span> <span class="n">port</span><span class="o">=</span><span class="mi">8020</span><span class="p">]</span>
<span class="n">Context</span> <span class="n">ctxMockConsole</span> <span class="n">ip</span> <span class="p">[</span><span class="n">host</span><span class="o">=</span><span class="s1">'127.0.0.1'</span> <span class="n">port</span><span class="o">=</span><span class="mi">8033</span><span class="p">]</span>

<span class="n">QActor</span> <span class="n">basicrobot</span> <span class="n">context</span> <span class="n">ctxbasicrobot</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
<span class="n">QActor</span> <span class="n">mockconsole</span> <span class="n">context</span> <span class="n">ctxbasicrobot</span> <span class="p">{</span>  <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<section id="modello-del-basicrobot">
<h5>Modello del basicrobot<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#modello-del-basicrobot" title="Permalink to this headline">¶</a></h5>
<p>Il punto rilevante dell’analisi è che il <code class="docutils literal notranslate"><span class="pre">BasicRobot22</span></code> esegue sempre con successo i comandi inviati con il
<em>Dispatch</em> <code class="docutils literal notranslate"><span class="pre">cmd</span></code>, mentre può dare risposte diverse a un comando inivato con la <em>Request</em> <code class="docutils literal notranslate"><span class="pre">step</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">QActor</span> <span class="n">basicrobot</span> <span class="n">context</span> <span class="n">ctxbasicrobot</span> <span class="p">{</span>
  <span class="n">State</span> <span class="n">s0</span> <span class="n">initial</span><span class="p">{</span>
  <span class="p">}</span>
  <span class="n">Transition</span> <span class="n">t0</span> <span class="n">whenMsg</span> <span class="n">cmd</span>    <span class="o">-&gt;</span> <span class="n">handleCmd</span>
              <span class="n">whenRequest</span> <span class="n">step</span> <span class="o">-&gt;</span> <span class="n">handleStep</span>

  <span class="n">State</span> <span class="n">handleCmd</span> <span class="p">{</span>
    <span class="n">onMsg</span><span class="p">(</span> <span class="n">cmd</span><span class="p">:</span><span class="n">cmd</span><span class="p">(</span><span class="n">ARG</span><span class="p">)</span> <span class="p">){</span>
      <span class="n">println</span><span class="p">(</span><span class="s2">"handleCmd SIMULO IL COMANDO cmd(${payloadArg(0)})"</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="n">State</span> <span class="n">handleStep</span> <span class="p">{</span>
    <span class="n">println</span><span class="p">(</span><span class="s2">"handleStep Simulo comportamento step andato a buon fine"</span><span class="p">)</span>
    <span class="n">replyTo</span> <span class="n">step</span> <span class="k">with</span> <span class="n">stepdone</span> <span class="p">:</span> <span class="n">stepdone</span><span class="p">(</span><span class="n">OK</span><span class="p">)</span>
    <span class="o">//</span><span class="n">println</span><span class="p">(</span><span class="s2">"Simulo comportamento step andato male"</span><span class="p">)</span>
    <span class="o">//...</span>
  <span class="p">}</span>
 <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="modello-della-console">
<h5>Modello della console<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#modello-della-console" title="Permalink to this headline">¶</a></h5>
<p>Introduco un mock actor che simula la console, invio una request <code class="docutils literal notranslate"><span class="pre">step</span></code> al <code class="docutils literal notranslate"><span class="pre">basicrobot</span></code> e verifico di ricevere come
risposta <code class="docutils literal notranslate"><span class="pre">stepdone</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">QActor</span> <span class="n">mockconsole</span> <span class="n">context</span> <span class="n">ctxMockConsole</span> <span class="p">{</span>
  <span class="n">State</span> <span class="n">s0</span> <span class="n">initial</span> <span class="p">{</span>
    <span class="n">println</span><span class="p">(</span><span class="s2">"sending request"</span><span class="p">)</span>
    <span class="n">request</span> <span class="n">basicrobot</span> <span class="o">-</span><span class="n">m</span> <span class="n">step</span> <span class="p">:</span> <span class="n">step</span><span class="p">(</span><span class="mi">300</span><span class="p">)</span>
    <span class="n">delay</span> <span class="mi">300</span>
  <span class="p">}</span>
  <span class="n">Transition</span> <span class="n">t0</span> <span class="n">whenReply</span> <span class="n">stepdone</span> <span class="o">-&gt;</span> <span class="n">handleStepDone</span>
                <span class="n">whenReply</span> <span class="n">stepfail</span> <span class="o">-&gt;</span> <span class="n">handleStepFail</span>

  <span class="n">State</span> <span class="n">handleStepDone</span> <span class="p">{</span>
    <span class="n">println</span><span class="p">(</span><span class="s2">"TEST OK"</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">State</span> <span class="n">handleStepFail</span> <span class="p">{</span>
     <span class="n">println</span><span class="p">(</span><span class="s2">"TEST KO"</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><span class="worktodo">WORKTODO: impostare un TestPlan automatizzato sia per cmd sia per step</span></p>
<ul class="simple">
<li><p><em>Suggerimento</em>: gli attori QAk sono <a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/AttoriCoap.html#attori-come-risorse-coap"><span class="std std-ref">risorse CoAP-osservabili</span></a>
che possono emettere informazioni sulle azioni che stanno compiendo e sul proprio stato.</p></li>
</ul>
</section>
</section>
</section>
</section>
<section id="basicrobot22-progetto">
<h2>BasicRobot22: Progetto<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#basicrobot22-progetto" title="Permalink to this headline">¶</a></h2>
<p><strong>Progetto</strong> unibo.basicrobot22</p>
<p>La fase di progettazione parte dal <a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#impostazione-del-modello"><span class="std std-ref">modello dell’analisi</span></a> e lo raffina introducendo
il codice necessario al soddisfacimento dei requisiti che l’analisi ha omesso.
Per parti di basso livello definite in Kotlin, può essere utile consultare <a class="reference external" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.kotlinIntro/userDocs/LabIntroductionToKotlin.html">kotlinUnibo</a>.</p>
<p>Anche in questa fase però, miriamo  a definire nel modello gli <strong>aspetti essenziali della ‘business logic’</strong> del robot,
lasciando ai <a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#basicrobot22-supporti"><span class="std std-ref">supporti</span></a>
il compito di occuparsi dei dettagli tecnologici relativi ai diversi <a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#requisito-tipidirobot"><span class="std std-ref">tipi di robot</span></a>.</p>
<section id="basicrobot22-configurazione">
<h3>BasicRobot22: configurazione<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#basicrobot22-configurazione" title="Permalink to this headline">¶</a></h3>
<p>La utility class <code class="docutils literal notranslate"><span class="pre">unibo.robot.robotSupport.kt</span></code> si occupa dei dettagli tecnologici specifici di ogni
<a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#requisito-tipidirobot"><span class="std std-ref">tipo di robot</span></a> utilizzando un supporto diverso per ciascun tipo.</p>
<section id="basicrobot22-supporti">
<h4>BasicRobot22: supporti<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#basicrobot22-supporti" title="Permalink to this headline">¶</a></h4>
<table class="colwidths-given docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30%">
<col style="width: 70%">
</colgroup>
<tbody>
<tr class="row-odd"><td><a class="reference internal image-reference" href="./BasicRobot22_files/wenvscene1.PNG"><img alt="_images/wenvscene1.PNG" class="align-center" src="./BasicRobot22_files/wenvscene1.PNG" style="width: 90%;"></a>
</td>
<td><p>per il VirtualRobot: <a class="reference external" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/unibo.basicrobot22/resources/robotVirtual/virtualrobotSupport2021.kt">virtualrobotSupport</a></p></td>
</tr>
<tr class="row-even"><td><a class="reference internal image-reference" href="./BasicRobot22_files/robotsUnibo.jpg"><img alt="_images/robotsUnibo.jpg" class="align-center" src="./BasicRobot22_files/robotsUnibo.jpg" style="width: 90%;"></a>
</td>
<td><p>per il  NanoRobot: <a class="reference external" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/unibo.basicrobot22/resources/robotNano/nanoSupport.kt">nanoSupport</a>, <a class="reference external" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/unibo.basicrobot22/resources/robotNano/Motors.c">motors</a></p></td>
</tr>
<tr class="row-odd"><td><a class="reference internal image-reference" href="./BasicRobot22_files/mbot.PNG"><img alt="_images/mbot.PNG" class="align-center" src="./BasicRobot22_files/mbot.PNG" style="width: 90%;"></a>
</td>
<td><p>per Mbot: <a class="reference external" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.qak21.basicrobot/userDocs/Mbot2020.html">mbotSupport</a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="file-di-configurazione">
<h4>File di configurazione<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#file-di-configurazione" title="Permalink to this headline">¶</a></h4>
<p>Il file di configurazione  è impostato su frasi JSon, come ad esempio il seguente
<code class="docutils literal notranslate"><span class="pre">basicrobotConfig.json</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"virtual"</span><span class="p">,</span><span class="s2">"port"</span><span class="p">:</span><span class="s2">"8090"</span><span class="p">,</span><span class="s2">"ipvirtualrobot"</span><span class="p">:</span><span class="s2">"..."</span><span class="p">}</span>
<span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"realnano"</span><span class="p">,</span><span class="s2">"port"</span><span class="p">:</span><span class="s2">"8020"</span><span class="p">,</span><span class="s2">"ipvirtualrobot"</span><span class="p">:</span><span class="s2">"dontcare"</span><span class="p">}</span>
<span class="o">//</span><span class="n">Arduino</span> <span class="n">connesso</span> <span class="n">al</span> <span class="n">Raspberry</span><span class="p">:</span>
<span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"realmbot"</span><span class="p">,</span> <span class="s2">"port"</span><span class="p">:</span><span class="s2">"/dev/ttyUSB0"</span><span class="p">,</span> <span class="s2">"ipvirtualrobot"</span><span class="p">:</span><span class="s2">"-"</span><span class="p">}</span>
<span class="o">//</span><span class="n">Arduino</span> <span class="n">connesso</span> <span class="n">al</span> <span class="n">PC</span><span class="p">:</span>
<span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"realmbot"</span><span class="p">,</span><span class="s2">"port"</span><span class="p">:</span><span class="s2">"COM6"</span><span class="p">,</span><span class="s2">"ipvirtualrobot"</span><span class="p">:</span><span class="s2">"dontcare"</span><span class="p">}</span>
</pre></div>
</div>
<p>Con riferimento a <a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#una-prima-architettura"><span class="std std-ref">Una prima architettura</span></a> possiamo estendere il modello come segue:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">System</span> <span class="n">basicrobot</span>
  <span class="o">....</span>
<span class="n">Context</span> <span class="n">ctxbasicrobot</span> <span class="n">ip</span> <span class="p">[</span><span class="n">host</span><span class="o">=</span><span class="s2">"localhost"</span> <span class="n">port</span><span class="o">=</span><span class="mi">8020</span><span class="p">]</span>

<span class="n">QActor</span> <span class="n">basicrobot</span> <span class="n">context</span> <span class="n">ctxbasicrobot</span><span class="p">{</span>
  <span class="n">State</span> <span class="n">s0</span> <span class="n">initial</span> <span class="p">{</span>
  <span class="n">discardMsg</span> <span class="n">Off</span>  <span class="o">//</span><span class="n">WE</span> <span class="n">want</span> <span class="n">receive</span> <span class="nb">any</span> <span class="n">msg</span>
  <span class="n">qrun</span> <span class="n">unibo</span><span class="o">.</span><span class="n">robot</span><span class="o">.</span><span class="n">robotSupport</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">myself</span><span class="p">,</span><span class="s2">"basicrobotConfig.json"</span><span class="p">)</span>
  <span class="p">[</span><span class="c1"># RobotType = unibo.robot.robotSupport.robotKind #]</span>
      <span class="k">if</span><span class="p">[</span><span class="c1"># RobotType != "virtual" #]{</span>
        <span class="p">[</span><span class="c1"># var robotsonar = context!!.hasActor("realsonar")</span>
          <span class="n">unibo</span><span class="o">.</span><span class="n">robot</span><span class="o">.</span><span class="n">robotSupport</span><span class="o">.</span><span class="n">createSonarPipe</span><span class="p">(</span><span class="n">myself</span><span class="p">)</span>
        <span class="c1">#]</span>
    <span class="p">}</span><span class="o">//</span><span class="n">The</span> <span class="n">Virtual</span> <span class="n">robot</span> <span class="n">sonar</span> <span class="ow">is</span> <span class="n">created</span> <span class="ow">in</span> <span class="n">virtualrobotSupport2021</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>L’operazione <a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/QakIntro.html#qrun"><span class="std std-ref">qrun</span></a> invoca il metodo static <code class="docutils literal notranslate"><span class="pre">create</span></code> della utility class <code class="docutils literal notranslate"><span class="pre">unibo.robot.robotSupport.kt</span></code>
che consulta il <a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#file-di-configurazione"><span class="std std-ref">File di configurazione</span></a> creando il supporto per il tipo di robot specificato.</p>
</section>
<section id="pipe-per-un-sonar">
<h4>pipe per un Sonar<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#pipe-per-un-sonar" title="Permalink to this headline">¶</a></h4>
<p>Sfruttiamo la feature <a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/QakIntro.html#actors-as-streams"><span class="std std-ref">Actors as streams</span></a> per generare eventi ‘di ambiente’ (come i dati di Sonar)
che possono essere percepiti e gestiti dal <code class="docutils literal notranslate"><span class="pre">BasicRobot22</span></code>.</p>
<blockquote>
<div><a class="reference internal image-reference" href="./BasicRobot22_files/sonarpipenano.png"><img alt="_images/sonarpipenano.png" class="align-center" src="./BasicRobot22_files/sonarpipenano.png" style="width: 75%;"></a>
</div></blockquote>
<p><a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/QakIntro.html#creazione-di-una-pipe"><span class="std std-ref">Creazione di una pipe</span></a></p>
<p>Il modello si raffina ultriormente:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">System</span> <span class="n">basicrobot</span>
  <span class="o">....</span>
<span class="n">Context</span> <span class="n">ctxbasicrobot</span> <span class="n">ip</span> <span class="p">[</span><span class="n">host</span><span class="o">=</span><span class="s2">"localhost"</span> <span class="n">port</span><span class="o">=</span><span class="mi">8020</span><span class="p">]</span>

<span class="n">QActor</span> <span class="n">basicrobot</span> <span class="n">context</span> <span class="n">ctxbasicrobot</span><span class="p">{</span> <span class="o">...</span> <span class="p">}</span>

<span class="n">CodedQActor</span> <span class="n">datacleaner</span>    <span class="n">context</span> <span class="n">ctxbasicrobot</span> <span class="n">className</span> <span class="s2">"rx.dataCleaner"</span>
<span class="n">CodedQActor</span> <span class="n">distancefilter</span> <span class="n">context</span> <span class="n">ctxbasicrobot</span> <span class="n">className</span> <span class="s2">"rx.distanceFilter"</span>

<span class="n">QActor</span> <span class="n">envsonarhandler</span> <span class="n">context</span> <span class="n">ctxbasicrobot</span><span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="il-requisito-observable">
<h3>il requisito  <em>observable</em><a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#il-requisito-observable" title="Permalink to this headline">¶</a></h3>
<p>Il modello QAk costituisce una risorsa CoAP-osservabile.
Le  informazioni sullo stato funzionale corrente sono definite in una variabile <code class="docutils literal notranslate"><span class="pre">RObState</span></code> che può assumere
valori quali:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>basicrobot(start)</em>, when the basicrobot is activated.</p></li>
<li><p><em>moveactivated(M)</em>, when the basicrobot has activated a non-step move M.</p></li>
<li><p><em>step(ST)</em>, when the basicrobot has activated a step with time ST.</p></li>
<li><p><em>stepDone(ST)</em>, when the basicrobot has terminated with success a step with time ST.</p></li>
<li><p><em>stepFail(D)</em>, when the basicrobot has failed a step after time D&lt;ST.</p></li>
<li><p><em>obstacle(M)</em>, when the basicrobot hits an obstacle while executing the move M.</p></li>
<li><p><em>basicrobot(end)</em>, when the basicrobot terminates.</p></li>
</ul>
</div></blockquote>
</section>
<section id="la-console-di-comando">
<h3>La console di comando<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#la-console-di-comando" title="Permalink to this headline">¶</a></h3>
<p>La console  <code class="docutils literal notranslate"><span class="pre">consoleGuiSimple</span></code> può connettersi al <code class="docutils literal notranslate"><span class="pre">BasicRobot22</span></code> usando uno dei seguenti protocolli,
secondo quanto definito nel file <a class="reference external" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/unibo.basicrobot22/resources/connQak/connQak.sysConnKb.kt">connQak.sysConnKb.kt</a></p>
<ul class="simple">
<li><p>TCP</p></li>
<li><p>HTTP</p></li>
<li><p>CoAP</p></li>
<li><p>MQTT</p></li>
</ul>
<p>Il pulsante <strong>p</strong> invia una richiesta di <em>step</em> con <code class="docutils literal notranslate"><span class="pre">TIME=350</span></code>.</p>
<p><span class="remark">La console invia i comandi mediante dispatch</span></p>
<p>Sono anche disponibili file <strong>Jupyter</strong>, nella directory <code class="docutils literal notranslate"><span class="pre">resources/jupiter</span></code>.</p>
</section>
<section id="esperimenti-di-uso">
<h3>Esperimenti di uso<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#esperimenti-di-uso" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Attivare <code class="docutils literal notranslate"><span class="pre">BasicRobot22</span></code> eseguendo <code class="docutils literal notranslate"><span class="pre">it.unibo.ctxbasicrobot.MainCtxbasicrobot.kt</span></code></p></li>
<li><p>Atiivare una console eseguendo  <code class="docutils literal notranslate"><span class="pre">consoles.consoleGuiSimple.kt</span></code></p></li>
<li><p>Attivare un CoapObserver eseguendo <code class="docutils literal notranslate"><span class="pre">basicrobotCoapObserver</span></code></p></li>
<li><p>Attivare una ulteriore console con protocollo CoAP</p></li>
</ol>
<p>Per provocare interazioni usando MQTT, occorre</p>
<ul>
<li><p>(in <a class="reference external" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/unibo.basicrobot22/src/basicrobot.qak">basicrobotqak</a>) togliere il commento</p>
<p><code class="docutils literal notranslate"><span class="pre">mqttBroker</span> <span class="pre">"broker.hivemq.com"</span> <span class="pre">:</span> <span class="pre">1883</span> <span class="pre">eventTopic</span> <span class="pre">"unibo/basicrobot"</span></code></p>
</li>
<li><p>Attivare una console con protocollo MQTT oppure <code class="docutils literal notranslate"><span class="pre">qakbasicrobotcallerMQTT.ipynb</span></code>
in <code class="docutils literal notranslate"><span class="pre">it.unibo.issLabStart/resources/jupyter/</span></code></p></li>
</ul>
</section>
</section>
<section id="distribuzione">
<h2>Distribuzione<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#distribuzione" title="Permalink to this headline">¶</a></h2>
<section id="dipendenze-unibo">
<h3>Dipendenze unibo<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#dipendenze-unibo" title="Permalink to this headline">¶</a></h3>
<p>Le librerie richieste dal progetto sono definite nel file <a class="reference external" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/unibo.basicrobot22/build.gradle">build.gradle</a> e comprendono i seguenti supporti
sviluppati da unibo:</p>
<ul class="simple">
<li><p>implementation name: <span class="blue">‘uniboInterfaces’</span> : interfacce ‘storiche’</p></li>
<li><p>implementation name: <span class="blue">‘2p301’</span> : tuProlog (necessario per qak)</p></li>
<li><p>implementation name: <span class="blue">‘unibo.comm22-1.1’</span> : comunicazioni 2022</p></li>
<li><p>implementation name: <span class="blue">‘unibo.qakactor22-2.8’</span> :  versione qak 2022 che usa le comunicazioni 2022</p></li>
</ul>
</section>
<section id="basicrobot22-dockerfile">
<h3>BasicRobot22: Dockerfile<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#basicrobot22-dockerfile" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FROM</span> <span class="n">openjdk</span><span class="p">:</span><span class="mf">12.0</span><span class="o">.</span><span class="mi">2</span>
<span class="n">EXPOSE</span> <span class="mi">8020</span>
<span class="c1">## ADD extracts the tar</span>
<span class="n">ADD</span> <span class="o">./</span><span class="n">build</span><span class="o">/</span><span class="n">distributions</span><span class="o">/</span><span class="n">it</span><span class="o">.</span><span class="n">unibo</span><span class="o">.</span><span class="n">basicrobot</span><span class="o">-</span><span class="mf">1.0</span><span class="o">.</span><span class="n">tar</span> <span class="o">/</span>
<span class="n">WORKDIR</span> <span class="o">/</span><span class="n">it</span><span class="o">.</span><span class="n">unibo</span><span class="o">.</span><span class="n">basicrobot</span><span class="o">-</span><span class="mf">1.0</span><span class="o">/</span><span class="nb">bin</span>
<span class="n">COPY</span> <span class="o">./*.</span><span class="n">pl</span> <span class="o">./</span>
<span class="n">COPY</span> <span class="o">./*.</span><span class="n">json</span> <span class="o">./</span>

<span class="c1">##  docker build -t basicrobot22:1.0 .</span>
<span class="c1">##  docker run -it --rm --name basicrobot22 -p8020:8020/tcp --privileged basicrobot22  /bin/bash</span>
</pre></div>
</div>
<section id="tagging-and-register-on-dockerhub">
<h4>Tagging and register on Dockerhub<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#tagging-and-register-on-dockerhub" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">tag</span> <span class="n">basicrobot22</span><span class="p">:</span><span class="mf">1.0</span> <span class="n">natbodocker</span><span class="o">/</span><span class="n">basicrobot22</span><span class="p">:</span><span class="mf">1.0</span>
<span class="o">//</span><span class="n">Logging</span> <span class="n">on</span> <span class="n">Dockerhub</span>
<span class="nb">type</span> <span class="n">docker_password</span><span class="o">.</span><span class="n">txt</span> <span class="o">|</span> <span class="n">docker</span> <span class="n">login</span> <span class="o">--</span><span class="n">username</span> <span class="n">natbodocker</span> <span class="o">--</span><span class="n">password</span><span class="o">-</span><span class="n">stdin</span>
<span class="o">//</span><span class="n">Register</span>
<span class="n">docker</span> <span class="n">push</span> <span class="n">natbodocker</span><span class="o">/</span><span class="n">basicrobot22</span><span class="p">:</span><span class="mf">1.0</span>
</pre></div>
</div>
</section>
</section>
<section id="basicrobot22-yaml">
<h3>basicrobot22.yaml<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#basicrobot22-yaml" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">version</span><span class="p">:</span> <span class="s1">'3'</span>
<span class="n">services</span><span class="p">:</span>
  <span class="n">wenv</span><span class="p">:</span>
    <span class="c1">#image: docker.io/natbodocker/virtualrobotdisi:4.0</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">virtualrobotdisi</span><span class="p">:</span><span class="mf">4.0</span>
    <span class="n">ports</span><span class="p">:</span>
      <span class="o">-</span> <span class="mi">8090</span><span class="p">:</span><span class="mi">8090</span>
      <span class="o">-</span> <span class="mi">8091</span><span class="p">:</span><span class="mi">8091</span>
  <span class="n">robot</span><span class="p">:</span>
    <span class="c1">##image: docker.io/natbodocker/basicrobot21:1.0</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">basicrobot22</span>
    <span class="n">ports</span><span class="p">:</span>
      <span class="o">-</span> <span class="mi">8020</span><span class="p">:</span><span class="mi">8020</span><span class="o">/</span><span class="n">tcp</span>
      <span class="o">-</span> <span class="mi">8020</span><span class="p">:</span><span class="mi">8020</span><span class="o">/</span><span class="n">udp</span>
    <span class="n">depends_on</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">wenv</span>


<span class="c1">## docker-compose -f basicrobot22.yaml  up</span>
<span class="c1">## PER ATTIVARE SOLO Wenv:</span>
<span class="c1">## docker-compose -f basicrobot22.yaml run --service-ports wenv</span>
</pre></div>
</div>
<section id="revisione-del-file-di-configurazione">
<h4>Revisione del file di configurazione<a class="headerlink" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/BasicRobot22.html#revisione-del-file-di-configurazione" title="Permalink to this headline">¶</a></h4>
<p>La costruzione all’interno della macchina virtuale di un <a class="reference internal" href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/VirtualRobot.html#virtualrobot"><span class="std std-ref">VirtualRobot</span></a> come servizio
da cui dipende <code class="docutils literal notranslate"><span class="pre">BasicRobot22</span></code> richiede una</p>
<p><span class="remark">Modifica alla specifiche di configurazione</span></p>
<ul class="simple">
<li><p>L’indirizzo ip deve assumere ora il nome del servizio (<strong>wenv</strong>):</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"virtual"</span><span class="p">,</span> <span class="s2">"port"</span><span class="p">:</span><span class="s2">"8090"</span><span class="p">,</span> <span class="s2">"ipvirtualrobot"</span><span class="p">:</span><span class="s2">"wenv"</span><span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      
      <div class="clearer"></div>
    </div>
    <div class="footer">
      ©2021, Antonio Natali.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="file:///D:/Michele%20Righi/Programmi/GitHub/issLab2022/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/_sources/BasicRobot22.rst.txt" rel="nofollow">Page source</a>
    </div>

    

    
  
</body></html>